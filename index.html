<style>

::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 6px;
}

::-webkit-scrollbar-thumb:hover {
    background: #555;
}


* {
    scrollbar-width: thin;
    scrollbar-color: #888 #f1f1f1;
}


body {
    -ms-overflow-style: none;  
}

body::-webkit-scrollbar {
    display: none;  
}


.custom-scroll {
    position: relative;
    overflow: hidden;
}

.custom-scroll .content {
    overflow-y: scroll;
    height: 100%;
}

.custom-scroll .scrollbar {
    position: absolute;
    top: 0;
    right: 0;
    width: 12px;
    height: 100%;
    background: #f1f1f1;
    border-radius: 6px;
}

.custom-scroll .scrollbar-thumb {
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    background: #888;
    border-radius: 6px;
}
.container {
    height: 300px;
    width: 400px;
    /* border: 1px solid gray; */
}
</style>
<div class="container custom-scroll">
    <div class="content">
        
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        
    </div>
    <div class="scrollbar">
        <div class="scrollbar-thumb"></div>
    </div>
</div>

<script>
   document.addEventListener('DOMContentLoaded', function() {
    const customScrolls = document.querySelectorAll('.custom-scroll');

    customScrolls.forEach(customScroll => {
        const content = customScroll.querySelector('.content');
        const scrollbar = customScroll.querySelector('.scrollbar');
        const scrollbarThumb = customScroll.querySelector('.scrollbar-thumb');

        const updateThumbPosition = () => {
            const scrollRatio = content.scrollTop / (content.scrollHeight - content.clientHeight);
            scrollbarThumb.style.top = scrollRatio * (customScroll.clientHeight - scrollbarThumb.clientHeight) + 'px';
        };

        const updateContentScroll = (e) => {
            const scrollRatio = e.offsetY / customScroll.clientHeight;
            content.scrollTop = scrollRatio * (content.scrollHeight - content.clientHeight);
        };

        content.addEventListener('scroll', updateThumbPosition);

        customScroll.addEventListener('wheel', (e) => {
            content.scrollTop += e.deltaY;
            e.preventDefault();
        });

        scrollbar.addEventListener('click', (e) => {
            if (e.target !== scrollbarThumb) {
                updateContentScroll(e);
                updateThumbPosition();
            }
        });

        let isDragging = false;
        let startY;
        let startTop;

        scrollbarThumb.addEventListener('mousedown', (e) => {
            isDragging = true;
            startY = e.clientY;
            startTop = parseInt(window.getComputedStyle(scrollbarThumb).top, 10);
            document.body.classList.add('no-select');
            e.preventDefault();
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaY = e.clientY - startY;
                const newTop = startTop + deltaY;
                const maxTop = customScroll.clientHeight - scrollbarThumb.clientHeight;
                scrollbarThumb.style.top = Math.min(Math.max(newTop, 0), maxTop) + 'px';

                const scrollRatio = parseInt(scrollbarThumb.style.top, 10) / maxTop;
                content.scrollTop = scrollRatio * (content.scrollHeight - content.clientHeight);
            }
        });

        document.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                document.body.classList.remove('no-select');
            }
        });

        const observer = new ResizeObserver(() => {
            const thumbHeightRatio = content.clientHeight / content.scrollHeight;
            scrollbarThumb.style.height = Math.max(thumbHeightRatio * customScroll.clientHeight, 20) + 'px';
            updateThumbPosition();
        });

        observer.observe(content);
    });
});
 
</script>